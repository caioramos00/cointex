{% load theming %}{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, viewport-fit=cover" />
  <title>Criar conta — MPay</title>

  <meta name="facebook-domain-verification" content="73hwg7lythnnqtl0mtlqdgyewx6h3z" />
  <link rel="icon" href="{% themed_static 'images/logo/favicon.png' %}" type="image/png" />
  <link rel="apple-touch-icon" href="{% themed_static 'images/logo/favicon.png' %}" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="{% themed_static 'css/vendors/bootstrap.min.css' %}" />
  <link rel="stylesheet" href="{% themed_static 'css/vendors/swiper-bundle.min.css' %}" />
  <link rel="stylesheet" href="{% themed_static 'css/style.css' %}" />
  <link rel="stylesheet" href="{% themed_static 'css/overrides.css' %}" />
</head>

<body class="mpay-theme auth-body">
  <div class="auth-header">
    <a href="{% url 'core:home' %}"><i class="back-btn" data-feather="arrow-left"></i></a>
    <img class="img-fluid img" src="{% themed_static 'images/authentication/6.svg' %}" alt="Cadastro" />
    <div class="auth-content">
      <div>
        <h2>Crie sua conta na MPay</h2>
        <h4 class="p-0">Preencha o formulário abaixo</h4>
      </div>
    </div>
  </div>

  <form class="auth-form theme-form" method="post" action="">
    {% csrf_token %}
    <div class="custom-container">
      <div class="form-group">
        <label for="id_first_name" class="form-label">Nome</label>
        <div class="form-input">{{ form.first_name }}</div>
      </div>
      <div class="form-group">
        <label for="id_last_name" class="form-label">Sobrenome</label>
        <div class="form-input">{{ form.last_name }}</div>
      </div>
      <div class="form-group">
        <label for="id_email" class="form-label">E-mail</label>
        <div class="form-input">{{ form.email }}</div>
      </div>
      <div class="form-group">
        <label for="date_of_birth" class="form-label">Data de nascimento</label>
        <div class="form-input">{{ form.date_of_birth }}</div>
      </div>
      <div class="form-group">
        <label for="cpf" class="form-label">CPF</label>
        <div class="form-input">{{ form.cpf }}</div>
      </div>
      <div class="form-group">
        <label for="phone_number" class="form-label">Telefone</label>
        <div class="form-input">{{ form.phone_number }}</div>
      </div>
      <div class="form-group">
        <label for="id_password1" class="form-label">Senha</label>
        <div class="form-input box-auth-pass">
          {{ form.password1 }}
          <span class="show-pass"><i class="icon-view"></i><i class="icon-view-hide"></i></span>
        </div>
      </div>
      <div class="form-group">
        <label for="id_password2" class="form-label">Confirmar senha</label>
        <div class="form-input box-auth-pass">
          {{ form.password2 }}
          <span class="show-pass2"><i class="icon-view"></i><i class="icon-view-hide"></i></span>
        </div>
      </div>

      <div class="remember-option terms-check mt-3">
        <div class="form-check p-0">
          <input class="form-check-input" type="checkbox" id="aceito-termos" checked />
          <label class="form-check-label" for="aceito-termos">
            Eu concordo com os <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">Termos e Condições</a>
          </label>
        </div>
      </div>

      <button type="submit" class="btn theme-btn mt-3">Criar conta</button>

      <h4 class="signup">Já tem uma conta? <a href="{% url 'accounts:login' %}">Entrar</a></h4>

      <!-- Botões sociais (deixados comentados até ativar)
      <a href="#" class="btn gray-btn mt-3">
        <img class="img-fluid google" src="{% themed_static 'images/svg/google.svg' %}" alt="Google" />
        Continuar com Google
      </a>
      <a href="#" class="btn gray-btn mt-3">
        <img class="img-fluid google" src="{% themed_static 'images/svg/facebook.svg' %}" alt="Facebook" />
        Continuar com Facebook
      </a>
      -->
    </div>
  </form>

  <!-- Termos -->
  <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="termsModalLabel">Termos e Condições de Uso — MPay</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
        </div>
        <div class="modal-body">
          {# (mesmo texto da versão anterior que enviei; mantido aqui) #}
          {{ terms_html|default:"<p>Consulte a versão anterior desta conversa para o texto completo dos Termos e Condições com LGPD/KYC/PLD, PIX e canais de contato suporte@mpaybank.cash e ouvidoria@mpaybank.cash.</p>"|safe }}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
        </div>
      </div>
    </div>
  </div>

  <script src="{% themed_static 'js/feather.min.js' %}"></script>
  <script src="{% themed_static 'js/custom-feather.js' %}"></script>
  <script src="{% themed_static 'js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% themed_static 'js/script.js' %}"></script>
  <script src="https://unpkg.com/imask"></script>
  <script>
    // Fluxo mobile suave: foco inicial e Enter avança
    document.addEventListener('DOMContentLoaded', function () {
      const order = ['id_first_name','id_last_name','id_email','date_of_birth','cpf','phone_number','id_password1','id_password2'];
      order.forEach((id, i) => {
        const el = document.getElementById(id);
        if (!el) return;
        el.setAttribute('enterkeyhint', i < order.length-1 ? 'next' : 'done');
        if (id === 'id_email'){ el.setAttribute('autocomplete','email'); el.setAttribute('autocapitalize','none'); el.setAttribute('inputmode','email'); }
        if (id === 'phone_number'){ el.setAttribute('autocomplete','tel'); el.setAttribute('inputmode','tel'); }
        el.addEventListener('keydown', function(e){
          if (e.key === 'Enter'){
            e.preventDefault();
            const next = document.getElementById(order[i+1]);
            if (next) next.focus({preventScroll:true}); else this.form.requestSubmit();
          }
        });
      });
      const first = document.getElementById('id_first_name');
      if (first) first.focus({preventScroll:true});
    });
  </script>
</body>
</html>
